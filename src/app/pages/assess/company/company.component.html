<nl-spinner [name]="spinnerName"></nl-spinner>
<div class="mt-3 row flex-column" *ngIf="refreshRecords">
  <ng-container *ngIf="profile$ | async as profile">
    <strong class="col mb-3">{{
      profile.role === userRole.SUPER_ADMIN ? 'Admin' : 'Customer'
    }}</strong>

    <ng-container *ngIf="companies$ | async as companies">
      <div class="mb-3">
        <button
          type="button"
          routerLink="add"
          [relativeTo]="activatedRoute"
          class="p-button ml-auto d-block">
          Add {{ profile.role === userRole.SUPER_ADMIN ? 'Admin' : 'Customer' }}
        </button>
      </div>
      <nl-table [cols]="cols" [value]="companies" [actionsList]="actionsList">
        <ng-template #customBodyTpl let-rowData let-columns="columns">
          <ng-template ngFor let-col [ngForOf]="columns" let-i="index">
            <td *ngIf="col.visible">
              <ng-container [ngSwitch]="col.field">
                <ng-container *ngSwitchCase="'id'">
                  <span
                    class="link-primary nl-cursor-pointer"
                    [routerLink]="['/assess/company/', rowData['id'], 'view']"
                    >{{ rowData[col.field] }}</span
                  >
                </ng-container>
                <ng-container *ngSwitchCase="'name'">
                  <span
                    class="link-primary nl-cursor-pointer"
                    [routerLink]="['/assess/company/', rowData['id'], 'view']"
                    >{{ rowData[col.field] }}</span
                  >
                </ng-container>
                <ng-container *ngSwitchDefault>{{ rowData[col.field] }}</ng-container>
              </ng-container>
            </td>
          </ng-template>
        </ng-template>
      </nl-table>
    </ng-container>
  </ng-container>
</div>
